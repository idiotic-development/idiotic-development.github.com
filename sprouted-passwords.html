<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<title>Sprouted Passwords</title>
	<script src="https://raw.githubusercontent.com/js-cookie/js-cookie/master/src/js.cookie.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://raw.githubusercontent.com/davidbau/seedrandom/released/seedrandom.min.js"></script>
	<style type="text/css">
		body
		{
			font-family: monospace;
		}

		input
		{
			margin: 2px;
		}

		input[type='text']
		{
			width: 200px;
		}

		input[name='size']
		{
			width: 121px;
		}

		input[type='submit']
		{
			width: 75px;
		}
	</style>
</head>
<body>
<script type="text/javascript">
	var GET = function () {
		// This function is anonymous, is executed immediately and 
		// the return value is assigned to QueryString!
		var query_string = {};
		var query = window.location.search.substring(1);
		var vars = query.split("&");
		for (var i=0;i<vars.length;i++) {
			var pair = vars[i].split("=");
					// If first entry with this name
			if (typeof query_string[pair[0]] === "undefined") {
				query_string[pair[0]] = decodeURIComponent(pair[1]);
					// If second entry with this name
			} else if (typeof query_string[pair[0]] === "string") {
				var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
				query_string[pair[0]] = arr;
					// If third or later entry with this name
			} else {
				query_string[pair[0]].push(decodeURIComponent(pair[1]));
			}
		} 
		return query_string;
	}();

	(function ()
	{
		var salt = GET.salt == undefined ? Cookies.get ("salt") : GET.salt;
		var size = GET.size == undefined ? Cookies.get ("size") : GET.size;

		if (size == undefined)
			size = 25;

		if (GET.seed == undefined || GET.salt == undefined)
		{
			document.write ("<form method='get' action='#'><label for='seed'>Seed</label><input type='text' name='seed' autocomplete='off'><br><label for='salt'>Salt</label><input type='text' name='salt' autocomplete='off' value='"+salt+"'><br><label for='size'>Size</label><input type='number' name='size' value='"+size+"'><input type='submit' value='Encode'><br><input type='checkbox' checked='true'>remember<br>Tip: Checkout the <a href='https://gist.github.com/RedHatter/b432f746cb53cc3f7f91'>greasemonkey script</a>!</form>");
			$("form").submit (function ()
			{
				var seed = $("input[name='seed']").val ();
				var salt = $("input[name='salt']").val ();
				var size = $("input[name='size']").val ();

				if (seed == "" || salt == "")
					return false;

				if ($("input[type='checkbox']").checked)
					return true;

				Cookies.set('salt', salt, { expires: 30 });
				Cookies.set('size', size, { expires: 30 });
			});
			return;
		}

		Math.seedrandom(GET.seed + GET.salt);
		var password = "";
		for (var i = 0; i <= GET.size; i++)
			password += String.fromCharCode (Math.random () * 94 + 33);

		document.write (password);
	})();
</script>
</body>
</html>
