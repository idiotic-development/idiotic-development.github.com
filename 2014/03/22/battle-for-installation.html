<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Battle for Installation</title>
	<link rel="alternate" type="application/rss+xml" title="Idiotic Design and Development" href="http://idiotic-development.github.io/feed.xml">
	<link rel="stylesheet" type="text/css" href="/style/pygments/solarized-light.css">
	<link rel="stylesheet" type="text/css" href="/style/main.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="/style/jquery.cookie.js"></script>
<script type="text/javascript">
	$(document).ready (function ()
	{
		if (parseInt($("body").css ("width")) < 1000)
			$("#sidebar, #content").addClass ("topdown");

		if ($.cookie('theme') == 'black')
			$(document.createElement("link"))
				.attr ("rel", "stylesheet")
				.attr("type", "text/css")
				.attr ("href", "/style/black.css")
				.appendTo ("head");

		$("#white").click (function ()
		{
			$("link[href='/style/black.css']").remove ();
			$.cookie('theme', 'white');
		});
		$("#black").click (function ()
		{
			$(document.createElement("link"))
				.attr ("rel", "stylesheet")
				.attr("type", "text/css")
				.attr ("href", "/style/black.css")
				.appendTo ("head");
			$.cookie('theme', 'black');
		});
	});
</script>
	<style type="text/css">
		#black, #white
		{
			background-color: #2d3339;
			width: 50px;
			height: 50px;
			display: inline-block;
			position: absolute;
			right: 10px;
			bottom: 10px;
		}

		#white
		{
			background-color: #ffffff;
			right: 70px;
		}
	</style>
</head>
<body>
 	<div id="sidebar">
		<a id="header" href="/"><img src="/style/idiotic.svg" alt="idiotic"></a>
		<ul id="menu">
	
		
			<li><a href="/development.html">Development</a></li>
		
	
		
			<li><a href="/design.html">Design</a></li>
		
	
		
	
		
	
		
			<li><a href="/about.html">About</a></li>
		
	
		
	
		
			<li><a href="/blog.html">Blog</a></li>
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
</ul>

		<div id="black"></div>
		<div id="white"></div>
	</div>
	<div id="content">
		<h1>Battle for Installation</h1>
		<hr>
		<br><br>
		<article>
	<header style="position: relative; top: -38px; color: #999">
		<time datetime="2014-03-22T00:00:00-07:00">March 22, 2014</time>
		&nbsp;<span class="tags"><a href='/tags/asus/'>asus</a>, <a href='/tags/grub/'>grub</a>, <a href='/tags/linux/'>linux</a>, <a href='/tags/ubuntu/'>ubuntu</a></span>
		&nbsp;by <a href="/redhatter.html">RedHatter</a>
	</header>
	<p>I recently came into possession of an <span class="caps">ASUS</span> 1225b netbook with Windows 7 installed. It’s a little beat up (the hinge is a goner) but a lot better than the nothing I had before. So, first things first, install&nbsp;Ubuntu.</p>

<ul>
  <li>Download the&nbsp;torrent</li>
  <li>Grab a usb&nbsp;stick</li>
  <li>Use <a href="http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/" target="_blank"><span class="caps">UUI</span></a> to make it&nbsp;live</li>
  <li>Change boot&nbsp;order</li>
  <li>Boot and&nbsp;install</li>
</ul>

<p>Easy, right? Not so fast. I reboot and am presented with those horrid spinning balls of color that is the Windows boot screen. What happened, why have the gods of grub forsaken&nbsp;me?</p>

<h2 id="booting-fedora">Booting&nbsp;Fedora</h2>
<p>My First thought is, of course, install grub manually. So I plug the usb back in and choose to run live. At this point I run into my fist major hiccup, the mouse and keyboard don’t work on <span class="caps">13.10</span> live. Well there are other live distributions out&nbsp;there.</p>

<p>A quick download and install later and I’m booting to Fedora 20 live … only to have it hang. In vain I Google hoping to feed on the mistakes of those who have come before me, but none came to my rescue. As a last ditch effort, I decide to make a new usb with <code>dd</code> instead of <span class="caps">UUI.</span> The system barely fit on my usb so just maybe that created the issue. Only problem is that I do not have a linux installation. Our old friend Google spit out <a href="http://www.chrysocome.net/dd">dd for Windows</a>, copy that to <code>system32</code> and we’re in&nbsp;business.</p>

<pre><code class="language-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>dd <span class="k">if</span><span class="o">=</span>c:<span class="se">\U</span>sers<span class="se">\*</span>**<span class="se">\D</span>ownloads<span class="se">\f</span>edora.iso <span class="nv">of</span><span class="o">=</span><span class="se">\\</span>.<span class="se">\f</span>: 
</pre></div>
</td></tr></table></code></pre>

<p>Plug in the new usb stick and it&nbsp;boots!</p>

<h2 id="reinstalling-grub">Reinstalling&nbsp;grub</h2>
<p>Since we have a (presumably) working system installed, the easiest way to install grub is to <code>chroot</code> into Ubuntu and install from&nbsp;there.</p>

<pre><code class="language-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre>su -
mount /dev/sda6 /mnt
<span class="k">for </span>i in /dev /dev/pts /proc /sys /run<span class="p">;</span> <span class="k">do</span>
<span class="k">    </span>mount --bind <span class="nv">$i</span> /mnt<span class="nv">$i</span>
<span class="k">done</span>

<span class="c"># For internet access</span>
mv /mnt/etc/resolv.conf /mnt/etc/resolv.conf.old
cp /etc/resolv.conf /mnt/etc/resolv.conf

chroot /mnt
</pre></div>
</td></tr></table></code></pre>

<p>Now to purge and reinstall&nbsp;grub.</p>

<pre><code class="language-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre>apt-get update
apt-get purge grub-common
apt-get install grub-pc
grub-install /dev/sda
update-grub
</pre></div>
</td></tr></table></code></pre>

<p>Everything looks successful. I cross my finders, reboot … and I’m back to the Windows login screen. No no no, Where did I go&nbsp;wrong!</p>

<h2 id="the-fix">The&nbsp;fix</h2>
<p>I do some more Googling. I bump my head against the desk a few times. I comb through the <span class="caps">BIOS</span> looking for anything that would bypass grub. I … wait, there it is! I have two boot&nbsp;options:</p>

<ul>
  <li>primary&nbsp;harddisk </li>
  <li><span class="caps">UEFI</span>: my&nbsp;usb</li>
</ul>

<p>I was booting the install medium as <span class="caps">UEFI.</span> I’m not using <span class="caps">UEFI</span>, I do not have a <span class="caps">UEFI</span> partition. This must be the problem. Under the boot priority selection there’s harddisk priority selection. Change that to my usb, save <span class="amp">&amp;</span> reboot, repeat grub installation, reboot, and&nbsp;voilà!</p>

<p>The moral of the story? Check your boot options <em>before</em> you&nbsp;install.</p>

<h2 id="epilogue">Epilogue</h2>
<p>One last thing, we have to move the resolve file back. I forgot and it took me way to long to realize why I could’t connect on some&nbsp;networks.</p>

<pre><code class="language-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre>sudo rm /etc/resolv.conf
sudo mv /etc/resolv.conf.old /etc/resolv.conf
</pre></div>
</td></tr></table></code></pre>

</article>
<div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'idioticdev';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
 </body>
</html>